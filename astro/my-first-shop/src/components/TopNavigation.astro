<div class="p-2 w-full bg-slate-800">
  <div
    class="container mx-auto flex justify-between items-center text-slate-50"
  >
    <nav aria-label="main navigation" class="space-x-4">
      <a href="/">🏠 Home</a>
      <a href="/products">🏷 Products</a>
      <a href="/products/new">➕ Add new</a>
    </nav>
    <div>
      <button class="py-0.5 px-1.5 rounded hover:bg-slate-100/50">
        <div class="relative">
          <span class="text-2xl">🛒</span>
          <span
            class="hidden px-1 absolute top-1 left-0 rounded bg-rose-500 text-xs"
            data-chart></span>
        </div>
      </button>
    </div>
  </div>
</div>

<script>
  import { $cart } from '../store/store'

  const chartEl = document.querySelector('[data-chart]')

  $cart.subscribe((store) => {
    if (store.length > 0) {
      if (chartEl) {
        chartEl?.classList.remove('hidden')
        chartEl.textContent = store
          .reduce((prev, current) => prev + current.quantity, 0)
          .toString()
      }
    } else {
      chartEl?.classList.add('hidden')
    }
  })
</script>
